<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yo-Kai Watch Prototype</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background-color: black;
    color: white;
    font-family: "Arial", sans-serif;
  }

  /* Pantalla de inicio */
  #startScreen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: black;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5em;
    cursor: pointer;
    z-index: 10;
  }

  /* Créditos */
  #credits {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.5em;
    opacity: 0;
    transition: opacity 2s ease-in-out;
  }

  /* Video */
  #introVideo {
    display: none;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
  }

  /* Transición de fundido */
  #fade {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: black;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1.5s ease-in-out;
    z-index: 5;
  }

  /* Menú */
  #menu {
    display: none;
    position: absolute;
    width: 100%;
    height: 100%;
    background: url("fondo.png") center/cover no-repeat;
    text-align: center;
  }

  #buttonsContainer {
    position: absolute;
    bottom: 15%;
    width: 100%;
  }

  .menu-btn {
    display: block;
    margin: 20px auto;
    padding: 15px 50px;
    background-color: #ffeb3b;
    color: black;
    border: 3px solid black;
    border-radius: 15px;
    font-size: 1.5em;
    cursor: pointer;
    transition: transform 0.2s, background-color 0.2s;
  }

  .menu-btn:hover {
    transform: scale(1.1);
    background-color: #fff176;
  }

  /* Pantalla de salida */
  #exitScreen {
    display: none;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3em;
    color: white;
    z-index: 10;
    opacity: 0;
    transition: opacity 1.5s;
  }

  /* Botón play para iOS si autoplay falla */
  #playButton {
    display: none;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2em;
    color: white;
    cursor: pointer;
    z-index: 20;
  }
</style>
</head>
<body>

<div id="startScreen">Presiona para comenzar</div>
<div id="credits">Game made by GSacoco Team</div>

<video id="introVideo" src="level5.mp4" playsinline webkit-playsinline></video>

<div id="fade"></div>

<div id="menu">
  <div id="buttonsContainer">
    <button class="menu-btn" id="startBtn">Start</button>
    <button class="menu-btn" id="quitBtn">Quit</button>
  </div>
  <audio id="menuMusic" src="musica_menu.mp3" loop></audio>
</div>

<div id="exitScreen">Saliendo...</div>
<div id="playButton">Toca para reproducir video</div>

<script>
const startScreen = document.getElementById("startScreen");
const credits = document.getElementById("credits");
const video = document.getElementById("introVideo");
const menu = document.getElementById("menu");
const music = document.getElementById("menuMusic");
const fade = document.getElementById("fade");
const exitScreen = document.getElementById("exitScreen");
const playButton = document.getElementById("playButton");

// Fullscreen
function requestFullscreenMode() {
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();
  else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
  else if (el.msRequestFullscreen) el.msRequestFullscreen();
}

// Secuencia tras el toque inicial
startScreen.addEventListener("click", () => {
  startScreen.style.display = "none";
  requestFullscreenMode();

  // Créditos
  credits.style.opacity = 1;
  setTimeout(() => { credits.style.opacity = 0; }, 3500);

  // Mostrar video
  setTimeout(() => {
    credits.style.display = "none";
    video.style.display = "block";

    // Intentar reproducir video y música
    video.play().catch(() => { playButton.style.display = "block"; });
    music.play().catch(() => console.log("Autoplay música bloqueado"));
  }, 5000);
});

// Botón iOS si autoplay falla
playButton.addEventListener("click", () => {
  video.play();
  music.play();
  playButton.style.display = "none";
});

// Al terminar el video → mostrar menú
video.addEventListener("ended", () => {
  fade.style.opacity = 1;
  setTimeout(() => {
    video.style.display = "none";
    menu.style.display = "block";
    fade.style.opacity = 0;
  }, 1500);
});

// Start
document.getElementById("startBtn").addEventListener("click", () => {
  fade.style.opacity = 1;
  setTimeout(() => {
    music.pause();
    fade.style.opacity = 0;
    alert("Starting the game...");
    requestFullscreenMode();
  }, 1500);
});

// Quit
document.getElementById("quitBtn").addEventListener("click", () => {
  fade.style.opacity = 1;
  setTimeout(() => {
    menu.style.display = "none";
    fade.style.opacity = 0;
    exitScreen.style.display = "block";
    requestAnimationFrame(() => { exitScreen.style.opacity = 1; });

    setTimeout(() => {
      window.close();
    }, 2000);
  }, 1500);
});
</script>

</body>
</html>
